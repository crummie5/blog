<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Crummie5</title>
        <link>https://www.crummie5.club</link>
        <description>Just a crummy blog. Talking about Active Directory, Windows, Linux, Web and General Hacking.</description>
        <generator>Zola</generator>
        <language>en</language>
        <atom:link href="https://www.crummie5.club/rss.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Sun, 12 Apr 2020 00:00:00 +0000</lastBuildDate>
        
            <item>
                <title>Kerberos Unconstrained Delegation: Compromising a Computer Object by its TGT</title>
                <pubDate>Sun, 12 Apr 2020 00:00:00 +0000</pubDate>
                <link>https://www.crummie5.club/kerberos-unconstrained-tgt/</link>
                <guid>https://www.crummie5.club/kerberos-unconstrained-tgt/</guid>
                <description>&lt;p&gt;Everything that involves Kerberos functionality is such a complex subject… since I’ve been abusing these attack chains a lot recently, I thought this post would be helpful to someone.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;&#x2F;strong&gt; Nothing explained here is new at all. If you understand how Delegations work you may be already aware of these vectors. Nonetheless it might not be as straight forward for everyone, hence I’m writing this.&lt;&#x2F;p&gt;
&lt;p&gt;If you are not familiar with Kerberos Delegation, you can find some links in the References section as I don’t feel necessary to explain what is already perfectly explained by others.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;a class=&quot;zola-anchor&quot; href=&quot;#introduction&quot; aria-label=&quot;Anchor link for: introduction&quot;&gt;
    &lt;svg id=&quot;i-link&quot; xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 32 32&quot; width=&quot;32&quot; height=&quot;32&quot; fill=&quot;none&quot;
        stroke=&quot;currentcolor&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot;&gt;
        &lt;path
            d=&quot;M18 8 C18 8 24 2 27 5 30 8 29 12 24 16 19 20 16 21 14 17 M14 24 C14 24 8 30 5 27 2 24 3 20 8 16 13 12 16 11 18 15&quot;&gt;
        &lt;&#x2F;path&gt;
    &lt;&#x2F;svg&gt;
&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Ok let’s asume we&#x27;ve compromised &lt;code&gt;Web01.capsule.corp&lt;&#x2F;code&gt;, a server with Kerberos Unconstrained Delegation enabled:&lt;&#x2F;p&gt;
&lt;figure&gt;
  &lt;img src=&quot;https:&#x2F;&#x2F;www.crummie5.club&#x2F;kerberos-unconstrained-tgt&#x2F;&#x2F;fig1.png&quot; alt=&quot;Web01 configured with Unconstrained Delegation.&quot; &#x2F;&gt;
  &lt;figcaption&gt;Web01 configured with Unconstrained Delegation.&lt;&#x2F;figcaption&gt;
&lt;&#x2F;figure&gt;
</description>
            </item>
        
            <item>
                <title>Pwning A Pwned Citrix</title>
                <pubDate>Sun, 19 Jan 2020 00:00:00 +0000</pubDate>
                <link>https://www.crummie5.club/pwning-a-pwned-citrix/</link>
                <guid>https://www.crummie5.club/pwning-a-pwned-citrix/</guid>
                <description>&lt;p&gt;&lt;strong&gt;Hello H4x0rs!&lt;&#x2F;strong&gt;
At this time you surely have heard about the new and dangerous Citrix vulnerability labeled as CVE-2019-19781, consisting in a Directory Traversal plus Remote Command Execution attack vector. During a real security engagement I had to face a peculiar situation related to this and I wanted to share it with you, hope you find it useful.&lt;&#x2F;p&gt;
&lt;p&gt;Just as a quick recap, CVE-2019-19781, also known as “Shitrix” takes advantage of how the Citrix Gateway appliance handles templates. You can create a template by making a call to the &lt;code&gt;&#x2F;vpn&#x2F;..&#x2F;vpns&#x2F;portal&#x2F;scripts&#x2F;newbm.pl&lt;&#x2F;code&gt; endpoint and inserting some Perl template into an XML file. This one contains the payload, but it is not executed until a request is made to the &lt;code&gt;&#x2F;vpn&#x2F;..&#x2F;vpns&#x2F;portal&#x2F;&amp;lt;xml_name&amp;gt;.xml&lt;&#x2F;code&gt; endpoint, which is the action that triggers the command execution.&lt;&#x2F;p&gt;
&lt;p&gt;There are a few exploits available to the public that implements that process so that you only have to specify the target and press enter to get a shell. However none of these worked for me for a good reason that we are going to explore in the following lines.&lt;&#x2F;p&gt;
</description>
            </item>
        
    </channel>
</rss>
